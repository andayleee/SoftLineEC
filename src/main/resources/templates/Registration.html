<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title >SoftLineEC - Регистрация</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <link th:href="@{/css/loginreg.css}" rel="stylesheet" />
  <link rel="shortcut icon" href="/images/slLogo.svg">
</head>
<header>
  <nav class="card" style="position: fixed; top: 0; width: 100%; z-index: 499; height: 50px">
    <link th:href="@{/images/SoftLineLogo.png}" rel="import"/>
    <div style="align-items: center">
      <a href="/main">
        <img th:src="@{/images/SoftLineLogo.png}" height="25" width="100" alt="Logo" style="margin-top: 12px; margin-left: 95px"/>
      </a>
      <div class="flex items-center md:order-2">
      </div>
    </div>
  </nav>
</header>
<body>
<img th:src="@{/images/BackgroundReg.png}" alt="Logo" class="img1"/>
<div class="login-box">
  <h2>Регистрация аккаунта</h2>
  <form method="post" th:action="@{/registration}" th:object="${User}">
    <div style="color: red" data-mask="email" th:if="${#fields.hasErrors('username')}" th:errors="*{username}"></div>
    <div class="user-box">
      <input type="text" data-mask="phone" id="firstname" name="username" required="">
      <label>Email</label>
    </div>
    <div class="tooltip" data-tooltip="Длина пароля должна быть не менее 8 символов и не более 20 символов
Пароль должен содержать как минимум одну строчную букву (a-z)
Пароль должен содержать как минимум одну заглавную букву (A-Z)
Пароль должен содержать как минимум одну цифру (0-9)
Пароль должен содержать как минимум один специальный символ (!@#$%^&*)" style="color: red" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div>
    <div class="user-box">
      <input type="password" data-mask="password" id="lastname" name="password" required="">
      <label>Пароль</label>
    </div>
    <div style="color: red" th:if="${#fields.hasErrors('repeatPassword')}" th:errors="*{repeatPassword}"></div>
    <div class="user-box">
      <input type="password" data-mask="phone" id="lastname2" name="repeatPassword" required="">
      <label>Повторите пароль</label>
    </div>
    <button type="text" class="login-btn">Зарегестрировать</button>
    <a href="/login" class="send-btn">Есть аккаунт?</a>
  </form>
</div>
<script src="https://unpkg.com/imask"></script>
<script src="js/main.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const inputElement = document.querySelector('[data-mask="password"]')
    const maskOptions = {
      mask: '********************'
    }
    IMask(inputElement, maskOptions)
  })

  const inputs = document.querySelectorAll(".user-box input");

  function addClass(){
    let parent = this.parentNode.parentNode;
    parent.classList.add("focus");
  }

  function removeClass(){
    let parent = this.parentNode.parentNode;
    if(this.value == ""){
      parent.classList.remove("focus");
    }
  }

  inputs.forEach(input => {
    input.addEventListener("focus", addClass);
    input.addEventListener("blur", removeClass);
  });
</script>
</body>
</html>
