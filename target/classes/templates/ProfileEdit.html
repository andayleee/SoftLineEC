<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml" style=" background-color: #EBECF0;">
<head>
    <title>SoftLineEC - информация о профиле</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link th:href="@{/css/main.css}" rel="stylesheet"/>
    <link rel="shortcut icon" href="/images/slLogo.svg">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/imask"></script>
    <script src="js/main.js"></script>
</head>
<body class="body">
<div th:insert="blocks/header.html"/>
<div class="center">
    <h1 class="titleProfile">настройки профиля</h1>
    <div class="row phoneRowColumn" style="margin: 0px 30px 0px 30px; padding-top: 30px;">
        <div class="col-4 phoneCol">
            <button type="submit" id="profile" class="custom-btn btn-16" style="width: 100%">Профиль</button>
        </div>
        <div class="col-4 phoneCol">
            <button type="submit" id="auth" class="custom-btn btn-16" style="width: 100%">Авторизация</button>
        </div>
        <div class="col-4 phoneCol">
            <button type="submit" id="deleteProfile" class="custom-btn btn-16" style="width: 100%">Удаление аккаунта
            </button>
        </div>
    </div>
    <div id="profileForm" style="margin: 0px 30px 0px 30px; padding-top: 30px;">
        <form method="post" th:object="${user_object}">
            <form th:object="${address}">
                <div class="col info">
                    <div class="row phoneRowColumn">
                        <div class="col-4 phoneCol">
                            <div class="group">
                                <input type="text" th:value="${user_object.userSur}" name="userSur" class="txt userSur"
                                       style="width: 100%" required>
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Фамилия</label>
                            </div>
                        </div>
                        <div class="col-4 phoneCol">
                            <div class="group">
                                <input type="text" th:value="${user_object.userNamee}" name="userNamee"
                                       class="txt userNamee" style="width: 100%" required>
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Имя</label>
                            </div>
                        </div>
                        <div class="col-4 phoneCol">
                            <div class="group">
                                <input type="text" th:value="${user_object.userPatr}" name="userPatr"
                                       style="width: 100%" class="txt userPatr">
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Отчество</label>
                            </div>
                        </div>
                    </div>
                    <div class="row phoneRowColumn">
                        <div class="col-4 phoneCol">
                            <div class="group">
                                <input type="date" th:value="${user_object.dateOfBirth}" style="width: 100%"
                                       class="date" name="dateOfBirth">
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Дата рождения</label>
                            </div>
                        </div>
                        <div class="col-4 phoneCol">
                            <div class="group">
                                <input type="text" th:value="${address.countyOfAddress}" name="country"
                                       class="txt country" style="width: 100%" required>
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Страна</label>
                            </div>
                        </div>
                        <div class="col-4 phoneCol">
                            <div class="group">
                                <input type="text" name="index" th:value="${address.indexOfAddress}" class="txt Index"
                                       style="width: 100%" required>
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Индекс</label>
                            </div>
                        </div>
                    </div>
                    <div class="row phoneRowColumn">
                        <div class="col-4 phoneCol">
                            <div class="group">
                                <input type="text" th:value="${address.cityOfAddress}" name="city" class="txt city"
                                       style="width: 100%" required>
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Город</label>
                            </div>
                        </div>
                        <div class="col-4 phoneCol">
                            <div class="group">
                                <input type="text" name="region" th:value="${address.regionOfAddress}"
                                       class="txt region" style="width: 100%" required>
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Регион</label>
                            </div>
                        </div>
                        <div class="col-4 phoneCol">
                            <div class="group">
                                <input type="text" name="street" th:value="${address.streetOfAddress}"
                                       class="txt street" style="width: 100%" required>
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Улица</label>
                            </div>
                        </div>
                    </div>
                    <div class="row phoneRowColumn">
                        <div class="col-4 phoneCol">
                            <div class="group">
                                <input type="text" th:value="${address.houseOfAddress}" name="house" class="txt house"
                                       style="width: 100%" required>
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Дом</label>
                            </div>
                        </div>
                        <div class="col-4 phoneCol">
                            <div class="group">
                                <input type="text" name="frame" th:value="${address.frameOfAddress}" class="txt frame"
                                       style="width: 100%">
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Корпус</label>
                            </div>
                        </div>
                        <div class="col-4 phoneCol">
                            <div class="group">
                                <input type="text" name="apartment" th:value="${address.apartmentOfAddress}"
                                       class="txt apartment" style="width: 100%" required>
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Квартира</label>
                            </div>
                        </div>
                    </div>
                    <div class="row phoneRowColumn">
                        <div class="col-4 phoneCol">
                            <div class="group">
                                <input type="text" name="PhoneNumber" th:value="${user_object.phoneNumber}"
                                       class="txt PhoneNumber" style="width: 100%" required>
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Телефон</label>
                            </div>
                        </div>
                        <div class="col-8 phoneCol">
                            <div class="group">
                                <input type="text" name="edInstitution" th:value="${user_object.edInstitution}"
                                       class="txt edInstitution" style="width: 100%" required>
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>ОУ</label>
                            </div>
                        </div>
                    </div>

                    <p style="text-align: start">Обращаем Ваше внимание, что указанная информация о Вас будет размещена
                        на сайте в открытом доступе. Вы самостоятельно определяете необходимость указания информации о
                        Вас и объем персональных данных, который желаете сделать доступным для третьих лиц. </p>
                    <button type="button" id="save-info-button" class="custom-btn btn-16" style="margin-bottom: 30px">
                        Сохранить
                    </button>
                    <div class="toast toast-success fade" id="myToast" role="alert" aria-live="assertive" aria-atomic="true" data-delay="5000" style="position: fixed; bottom: 20px; right: 20px;">
                        <div class="toast-body">
                            <p>Данные о профиле сохранены успешно!</p>
                        </div>
                    </div>
                </div>
            </form>
        </form>
    </div>

    <div class="row" id="authForm" style="display: none; margin: 0px 30px 0px 30px; padding-top: 30px;">
        <div class="col-3"></div>
        <div class="col-6 authForm">
            <form method="post" class="phoneForm" th:object="${user_object}">
                <p style="text-decoration: underline dashed red; color: red; display: none" id="usernameError">
                    Пользователь с таким логином уже существует</p>
                <div class="group">
                    <input type="text" th:value="*{username}" name="username" id="username" class="txt username"
                           style="width: 100%">
                    <span class="highlight"></span>
                    <span class="bar"></span>
                    <label>Логин</label>
                </div>
                <p style="text-decoration: underline dashed red; color: red; display: none" id="oldPasswordError">
                    Пароль не совпадает с настоящим</p>
                <div class="group">
                    <input type="text" name="oldPassword" id="oldPassword" class="txt oldPassword"
                           style="width: 100%">
                    <span class="highlight"></span>
                    <span class="bar"></span>
                    <label>Старый пароль</label>
                </div>
                <p style="text-decoration: underline dashed red; color: red; display: none" id="passwordError"
                   data-tooltip="Длина пароля должна быть не менее 8 символов и не более 20 символов
                      Пароль должен содержать как минимум одну строчную букву (a-z)
                      Пароль должен содержать как минимум одну заглавную букву (A-Z)
                      Пароль должен содержать как минимум одну цифру (0-9)
                      Пароль должен содержать как минимум один специальный символ (!@#$%^&*)">
                    Неверный пароль</p>
                <div class="group">
                    <input type="text" name="newPassword" id="newPassword" class="txt newPassword"
                           style="width: 100%">
                    <span class="highlight"></span>
                    <span class="bar"></span>
                    <label>Новый пароль</label>
                </div>
            </form>
            <button type="button" id="save-auth-info" class="custom-btn btn-16" style="width: 100%">Изменить
            </button>
            <div class="toast toast-success fade" id="myToastAuth" role="alert" aria-live="assertive" aria-atomic="true" data-delay="5000" style="position: fixed; bottom: 20px; right: 20px;">
                <div class="toast-body">
                    <p>Данные для авторизации сохранены успешно!</p>
                </div>
            </div>
        </div>
        <div class="col-3"></div>
    </div>

    <div class="row" id="deleteProfileForm" style="display: none; margin: 0px 30px 0px 30px; padding-top: 30px;">
        <p sec:authorize="hasAuthority('USER')" style="text-align: start">Внимание!</br>
            Отправляя запрос на удаление своей страницы, Вы должны отдавать себе отчет, что будут удалены ВСЕ Ваши
            данные, в том числе фотографии и прочая информация с дополнительных страниц.
            Вы не сможете больше авторизовываться на сайте под своими логином и паролем.</p>
        <p sec:authorize="hasAuthority('ADMIN') or hasAuthority('EMPLOYEE')" style="text-align: start">Данный
            аккаунт нельзя удалить.</p>
        <button sec:authorize="hasAuthority('USER')" type="button"
                class="custom-btn btn-16" style="width: 100%; background-color: #eaabb5" data-toggle="modal" data-target="#myModal">Удалить
        </button>
        <div class="modal fade" id="myModal">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Удаление профиля</h5>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        Вы уверены, что хотите удалить профиль?
                    </div>
                    <div class="modal-footer">
                        <button type="button" data-dismiss="modal" class="btn btn-primary create-button">Нет</button>
                        <button type="button" id="deleteProfileButton" class="btn btn-primary create-button">Да</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/js/ProfileEdit.js"></script>
</body>
<div th:insert="blocks/footer.html"/>
</html>